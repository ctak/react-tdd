<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />

    <title>Hello React!</title>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.26.0/babel.js"></script>
    <style>
    </style>
  </head>

  <body>
    <div id="root"></div>

    <!-- text/babel 이 아닌, -->
    <script type="text/javascript">
      function* generatorFunction() {
        console.log('안녕하세요?');
        yield 1;
        console.log('제너레이터 함수');
        yield 2;
        console.log('function*');
        yield 3;
        return 4;
      }

      const generator = generatorFunction();

      let val = generator.next();
      console.log('val 1:', val);

      val = generator.next();
      console.log('val 2:', val);

      val = generator.next();
      console.log('val 3:', val);

      val = generator.next();
      console.log('val 4:', val);

      // 한 번 더 한다.
      val = generator.next();
      console.log('val 5:', val);

      val = generator.next();
      console.log('val 6:', val);

      console.log('////////////////////////////////////////////////////////////////');

      function* sumGenerator() {
        console.log('sumGenerator 가 시작됐습니다.');
        // 1. yield 를 발견하고 멈춤.
        // 2. 여기서 next(1) 이 실행되는 것임.
        let a = yield;
        console.log('a 값을 받았습니다');
        // 3. yield 를 발견하고 멈춤.
        // 4. 여기서 next(2) 가 실행되는 것임.
        let b = yield;
        console.log('b 값을 받았습니다.');
        // 5. 그럼 바로 아래까지 실행한 다음 멈춤. 그러나 return 되지는 않았음으로,
        // {value: 3, done: false} 형식임.
        yield (a+b);
        // 6. 여기서 next() 를 실행하면
        // {value: undefined, done: true}
      }

      const sum = sumGenerator();

      console.log('////////////////////////////////////////////////////////////////');
      // redux-saga 에서는 이러한 원리로 액션을 모니터링하고,
      // 특정 액션이 발생했을 때,
      // 우리가 원하는 자바스크립트 코드를 실행시켜 준답니다.
      function* watchGenerator() {
        console.log('모니터링 시작');
        while (true) {
          const action = yield;
          if (action.type === 'HELLO') {
            console.log('안녕하세요?');
          }
          if (action.type === 'BYE') {
            console.log('안녕히가세요');
          }
        }
      }

      const watch = watchGenerator();

    </script>
  </body>
</html>
